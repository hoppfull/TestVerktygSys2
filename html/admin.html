<main>
    <h1 class="headercss"><img src="http://www.newton.se/content/themes/newton/assets/img/pngs/logo-footer.png" alt="Logo" />Välkommen : {{name}}  <button style="display: inline" ng-click="AdminLogout()" id="LogOut" type="button type" class="pull-right btn btn-info btn-lg"> Logout</button>
</h1>
    <section class="col-md-6">
        <h2>Användare</h2>
        <p class="col-md-4">
            <input type="text" placeholder="Filtrera efter efternamn" class="text-box" ng-model="searchName">
        </p>

        <ul class="nav nav-tabs">
            <li><a data-toggle="tab" ng-click="closeTabs(); showStudents = true;">Student</a></li>
            <li><a data-toggle="tab" ng-click="closeTabs(); showTeachers = true;">Lärare</a></li>
            <li><a data-toggle="tab" ng-click="closeTabs(); showAdmins = true;">Administratör</a></li>
        </ul>

        <article class="tab-content table-max-height-300">
            <table ng-show="showStudents" class="table table-hover" id="userTable">
                <thead>
                    <tr>
                        <th>Förnamn</th>
                        <th>Efternamn</th>
                        <th>Klass</th>
                        <th>Username</th>
                        <th>Password</th>
                        <th>Ta bort</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="student in students | filter: {lastName: searchName}">
                        <td>{{student.firstName}}</td>
                        <td>{{student.lastName}}</td>
                        <td>{{student.studentClass}}</td>
                        <td>{{student.username}}</td>
                        <td>{{student.password}}</td>
                        <td>
                            <button ng-click="removeUser(student.username)">Ta bort</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table ng-show="showTeachers" class="table table-hover" id="userTable">
                <thead>
                    <tr>
                        <th>Förnamn</th>
                        <th>Efternamn</th>
                        <th>Ämnen</th>
                        <th>Username</th>
                        <th>Password</th>
                        <th>Ta bort</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="teacher in teachers | filter: {lastName: searchName}" ng-click="selectUserName(teacher.username)">
                        <td>{{teacher.firstName}}</td>
                        <td>{{teacher.lastName}}</td>
                        <td>{{teacher.subjects}}</td>
                        <td>{{teacher.username}}</td>
                        <td>{{teacher.password}}</td>
                        <td>
                            <button ng-click="removeUser(teacher.username)">Ta bort</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table ng-show="showAdmins" class="table table-hover" id="userTable">
                <thead>
                    <tr>
                        <th>Förnamn</th>
                        <th>Efternamn</th>
                        <th>Username</th>
                        <th>Password</th>
                        <th>Ta bort</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="admin in admins | filter: {lastName: searchName}" ng-click="selectUserName(admin.username)">
                        <td>{{admin.firstName}}</td>
                        <td>{{admin.lastName}}</td>
                        <td>{{admin.username}}</td>
                        <td>{{admin.password}}</td>
                        <td>
                            <button ng-click="removeUser(admin.username)">Ta bort</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </article>

        <button ng-if="showStudents || showTeachers || showAdmins" data-toggle="modal" data-target="#addUserModal">Lägg till användare</button>
        <select ng-if="showTeachers">
            <option ng-repeat="subject in subjects" value="{{subject}}">{{subject}}</option>
        </select>
        <button ng-if="showTeachers">Lägg till ämne</button>
        <section id="addUserModal" class="modal fade" role="dialog">
            <main class="modal-dialog">
                <div class="modal-content">
                    <button type="button" class="close" data-dismiss="modal">x</button>
                    <h4 class="modal-title">Lägg till {{showStudents ? "student" : showTeachers ? "lärare" : showAdmins ? "administratör" : "användare"}}</h4>
                    <article class="modal-body">
                        <form ng-submit="addUserSubmit()">
                            <ul>
                                <li>
                                    <input ng-model="newUserName" name="tjena" type="text" placeholder="Användarnamn" ng-required="true">
                                </li>
                                <li>
                                    <input ng-model="newUserFirstName" type="text" placeholder="Förnamn" ng-required="true">
                                </li>
                                <li>
                                    <input ng-model="newUserLastName" type="text" placeholder="Efternamn" ng-required="true">
                                </li>
                                <li>
                                    <input ng-model="newUserPassword" type="text" placeholder="Lösenord" ng-required="true">
                                </li>
                                <li ng-if="showStudents">
                                    <input ng-model="newUserStudentClass" type="text" placeholder="Klass" ng-required="showStudents">
                                </li>
                            </ul>
                            <input class="btn btn-default" type="submit" value="Lägg till">
                        </form>
                    </article>
                </div>
            </main>
        </section>
    </section>

    <!--
    <section class="col-md-6">

        <h2>Användare</h2>
        <article class="row">
            <p class="col-md-4">
                <input type="text" placeholder="Filtrera efter efternamn" class="text-box" ng-model="searchName">
            </p>
        </article>
        
        <!--
        <ul class="nav nav-tabs">
            <li><a data-toggle="tab" href="#studentTab">Student</a></li>
            <li><a data-toggle="tab" href="#teacherTab">Lärare</a></li>
            <li><a data-toggle="tab" href="#adminTab">Administratör</a></li>
        </ul>
        
        
        
        <article class="tab-content table-max-height-300">

            <article id="studentTab" class="tab-pane fade in active ">
                <table class="table table-hover" id="userTable">
                    <thead>
                        <tr>
                            <th>Förnamn</th>
                            <th>Efternamn</th>
                            <th>Class</th>
                            <th>Username</th>
                            <th>Password</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="student in students | filter: {lastName: searchName}" ng-click="selectUserName(student.username)">
                            <td>{{student.firstName}}</td>
                            <td>{{student.lastName}}</td>
                            <td>{{student.studentClass}}</td>
                            <td>{{student.username}}</td>
                            <td>{{student.password}}</td>
                        </tr>
                    </tbody>
                </table>
            </article>
            <article id="teacherTab" class="tab-pane fade">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Förnamn</th>
                            <th>Efternamn</th>
                            <th>Ämne</th>
                            <th>Username</th>
                            <th>Password</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="teacher in teachers | filter: {lastName: searchName}" ng-click="selectUserName(teacher.username)">
                            <td>{{teacher.firstName}}</td>
                            <td>{{teacher.lastName}}</td>
                            <td></td>
                            <td>{{teacher.username}}</td>
                            <td>{{teacher.password}}</td>
                        </tr>
                    </tbody>
                </table>
            </article>
            <article id="adminTab" class="tab-pane fade">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Förnamn</th>
                            <th>Efternamn</th>
                            <th>Username</th>
                            <th>Password</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="admin in admins | filter: {lastName: searchName}" ng-click="selectUserName(admin.username)">
                            <td>{{admin.firstName}}</td>
                            <td>{{admin.lastName}}</td>
                            <td>{{admin.username}}</td>
                            <td>{{admin.password}}</td>
                        </tr>
                    </tbody>
                </table>
            </article>
        </article>
        
        
        <button type="button type" class="btn btn-info btn-lg" data-toggle="modal" data-target="#AddUser"> Lägg till användare</button>
        <article class="modal" id="AddUser" role="dialog">
            <article class="modal-dialog">
                <article class="modal-content">
                    <article class="modal-header">
                        <h6>Skapa Användare</h6>
                    </article>
                    <article class="modal-body">
                        <form>
                            <select ng-model="_occupation">
                                <option value="Student">Student</option>
                                <option value="Teacher">Lärare</option>
                                <option value="Admin">Administratör</option>
                            </select>
                            <br>
                            <p>
                                Förnamn :
                            </p>
                            <input ng-model="_firstName" type="text" required>
                            <br>
                            <p>
                                Efternamn :
                            </p>
                            <input ng-model="_lastName" type="text">
                            <br>
                            <p>
                                Användarnamn :
                            </p>
                            <input ng-model="_userName" type="text">
                            <br>
                            <p>
                                Lösenord :
                            </p>
                            <input ng-model="_password" type="text">
                        </form>
                    </article>
                    <article class="modal-footer">
                        <button ng-click="addUser()" type="button" class="btn btn-default" data-dismiss="modal">Klar</button>
                    </article>
                </article>
            </article>
        </article>
        <button ng-click="deleteSelectedUser()" id="button" type="button type" class="pull-right btn btn-info btn-lg"> Ta bort användare</button>
    </section>
    -->

    <section class="col-md-6 ">
        <h2>Prov att dela ut</h2>

        <article class="row">
            <p class="col-md-4">
                <input type="text" placeholder="Filtrera på Namn" class="text-box" ng-model="searchTests">
            </p>
        </article>
        <article class="table-max-height-300">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Namn</th>
                        <th>Startdatum</th>
                        <th>Slutdatum</th>
                        <th>Klass</th>
                        <th>Skicka ut</th>
                    </tr>
                </thead>
                <tbody class="">
                    <tr ng-repeat="(testIndex, tests) in tests  | filter: {examName: searchTests }">
                        <td>
                            {{tests.examName}}
                        </td>

                        <td>
                            <input ng-click="hej()" type="text" class="datepicker">
                        </td>
                        <td>
                            <input ng-click="hej()" type="text" class="datepicker">
                        </td>

                        <td>
                            {{tests.class}}
                        </td>
                        <td>
                            <!--TRIGGER MODAL HERE-->
                            <button ng-click="startTest()" type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#examModal">
                                Provet
                            </button>
                        </td>

                        <!--MODAL-->
                        <!--role är det som gör att ett fönster öppnas upp, säger vad elementet ska behandlas som-->
                        <div id="examModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">

                                <!--MODAL CONTENT-->
                                <div class="modal-content">

                                    <!--HEADER-->
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <!--TODO. Hämta namn på prov. Bekräftar att det är rätt öppnat-->
                                        <h1 class="modal-title">Prov</h1>

                                    </div>

                                    <!--BODY-->
                                    <div class="modal-body">
                                        <!--QUESTION FORM-->
                                        <form id="question-form" ng-submit="submit()">
                                            <div class="question-box" ng-repeat="question in questions">
                                                <h1>{{question.questionText}}</h1>
                                                <p ng-repeat="answers in question.answers">

                                                    <input id="answerId{{$parent.$index}}{{$index}}" class="answer-alternative" type="{{questionType(question.type)}}" name="{{$parent.$index}}">
                                                    <label for="answerId{{$parent.$index}}{{$index}}">{{answers.answerText}}</label>

                                                </p>
                                                <h6>Maxpoäng: {{question.score}}</h6>
                                            </div>


                                        </form>

                                    </div>

                                    <!--FOOTER-->
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <td>
                            <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#sendModal">Skicka</button>

                            <!-- Modal -->
                            <div class="modal fade" id="sendModal" role="dialog">
                                <div class="modal-dialog">
                                    <!-- Modal content-->
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <h4 class="modal-title">Elever att skicka till</h4>
                                        </div>
                                        <div class="modal-body">
                                            <form ng-submit="">
                                                <div class="" ng-repeat="student in users" ng-if="student.occupation == 'Student'">
                                                    <form>
                                                        <input type="checkbox"> {{student.firstName}} {{student.lastName}}
                                                    </form>
                                                </div>
                                                <input type="button" value="Skicka ut prov" ng-click="sendTest(send);" />
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <button type="button" class="btn btn-primary " data-ng-click="removeRowExams(testIndex)" />Ta bort</button>
                        </td>
                    </tr>
                </tbody>
            </table>

        </article>
    </section>
</main>